# init
conda init bash
conda create -n myenv

#download package with version
conda install scipy=1.1.0 sklearn=0.20.1 theano=1.0.3 keras=2.2.4 

#for gpu env
conda install -c conda-forge scipy scikit-learn keras pandas h5py matplotlib cudatoolkit cudnn tensorflow-gpu

# use an env from conda
. ~/.bashrc
conda activate myenv
conda deactivate myenv

# Check list of packages
conda env list

# salloc for testing
salloc --time=2:00:00 --cpus-per-task=8 --mem=16GB --account=<project_ID>

# load usc modules
module load usc
module load anaconda3
eval "$(conda shell.bash hook)"

#### example bash to run with conda:
#!/bin/bash
#SBATCH --nodes=1
#SBATCH --ntasks=1
#SBATCH --cpus-per-task=8
#SBATCH --mem=16GB
#SBATCH --time=1:00:00
#SBATCH --account=<project_ID>
module purge
eval "$(conda shell.bash hook)"
conda activate myenv
python script.py
